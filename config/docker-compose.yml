version: '3.8'

services:
  honeypot1:
    image: ubuntu:focal
    container_name: honeypot1
    environment:
      HONEYPOT_INSTANCE_NAME: honeypot1
      HONEYPOT_OUTPUT_DIR: /project/data/sessions/honeypot1
    volumes:
      - ./:/project:rw
    working_dir: /project
    command: >
      bash -c "
        apt-get update &&
        apt-get install -y python3 python3-venv python3-pip git &&
        python3 -m venv /venv &&
        . /venv/bin/activate &&
        pip install --upgrade pip &&
        pip install -r requirements.txt &&
        python run_honeypot.py --outdir /project/data/sessions/honeypot1 --instance honeypot1
      "
    ports:
      - "2222:2222"
    networks:
      - honeypot_net

  honeypot2:
    image: ubuntu:focal
    container_name: honeypot2
    environment:
      HONEYPOT_INSTANCE_NAME: honeypot2
      HONEYPOT_OUTPUT_DIR: /project/data/sessions/honeypot2
    volumes:
      - ./:/project:rw
    working_dir: /project
    command: >
      bash -c "
        apt-get update &&
        apt-get install -y python3 python3-venv python3-pip git &&
        python3 -m venv /venv &&
        . /venv/bin/activate &&
        pip install --upgrade pip &&
        pip install -r requirements.txt &&
        python run_honeypot.py --outdir /project/data/sessions/honeypot2 --instance honeypot2
      "
    ports:
      - "2223:2222"
    networks:
      - honeypot_net

  honeypot3:
    image: ubuntu:focal
    container_name: honeypot3
    environment:
      HONEYPOT_INSTANCE_NAME: honeypot3
      HONEYPOT_OUTPUT_DIR: /project/data/sessions/honeypot3
    volumes:
      - ./:/project:rw
    working_dir: /project
    command: >
      bash -c "
        apt-get update &&
        apt-get install -y python3 python3-venv python3-pip git &&
        python3 -m venv /venv &&
        . /venv/bin/activate &&
        pip install --upgrade pip &&
        pip install -r requirements.txt &&
        python run_honeypot.py --outdir /project/data/sessions/honeypot3 --instance honeypot3
      "
    ports:
      - "2224:2222"
    networks:
      - honeypot_net

  honeypot4:
    image: ubuntu:focal
    container_name: honeypot4
    environment:
      HONEYPOT_INSTANCE_NAME: honeypot4
      HONEYPOT_OUTPUT_DIR: /project/data/sessions/honeypot4
    volumes:
      - ./:/project:rw
    working_dir: /project
    command: >
      bash -c "
        apt-get update &&
        apt-get install -y python3 python3-venv python3-pip git &&
        python3 -m venv /venv &&
        . /venv/bin/activate &&
        pip install --upgrade pip &&
        pip install -r requirements.txt &&
        python run_honeypot.py --outdir /project/data/sessions/honeypot4 --instance honeypot4
      "
    ports:
      - "2225:2222"
    networks:
      - honeypot_net

  honeypot5:
    image: ubuntu:focal
    container_name: honeypot5
    environment:
      HONEYPOT_INSTANCE_NAME: honeypot5
      HONEYPOT_OUTPUT_DIR: /project/data/sessions/honeypot5
    volumes:
      - ./:/project:rw
    working_dir: /project
    command: >
      bash -c "
        apt-get update &&
        apt-get install -y python3 python3-venv python3-pip git &&
        python3 -m venv /venv &&
        . /venv/bin/activate &&
        pip install --upgrade pip &&
        pip install -r requirements.txt &&
        python run_honeypot.py --outdir /project/data/sessions/honeypot5 --instance honeypot5
      "
    ports:
      - "2226:2222"
    networks:
      - honeypot_net

networks:
  honeypot_net:
    driver: bridge
